<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>KoiBoi</title>
    <link rel="icon" href="favicon.png" />
    <script src="phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">
const config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
        default: 'arcade',
        arcade: {
            gravity: 0
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };
    var keys;
    var camera;
    const game = new Phaser.Game(config);

     function preload () {
        this.load.image('pond', 'assets/png/pondbottom.png');
        this.load.spritesheet('koiboi', 'assets/png/koi_sprite.png', {frameWidth: 150, frameHeight: 150})
        this.load.image('land1', 'assets/png/pondedgeleft.png');
        this.load.image('land2', 'assets/png/pondedgeright.png');
        this.load.image('pad1', 'assets/png/pad1.png');
        this.load.image('pad2', 'assets/png/pad2.png');
        this.load.image('pad3', 'assets/png/pad3.png');
        this.load.image('pad4', 'assets/png/pad4.png')
     }

     function create () {
        this.cameras.main.setBounds(0, -500, 400 * 2, 500 * 2);
        this.physics.world.setBounds(0, -500, 400 * 2, 500 * 2);

        /*const pondbottom = this.add.image(0, -400, 'pond');
        pondbottom.setScale(2);
        pondbottom.setOrigin(0);*/

        this.add.image(0, -500, 'pond').setFlipX(true).setOrigin(0);
        this.add.image(400, -500, 'pond').setFlipX(true).setOrigin(0);
        this.add.image(0, 0, 'pond').setOrigin(0);
        this.add.image(400, 0, 'pond').setOrigin(0);
        

        this.anims.create({
            key: 'swim',
            frames: this.anims.generateFrameNumbers('koiboi', { frames: [ 0, 1, 2, 3, 4, 5, 6, 7 ] }),
            frameRate: 8,
            repeat: -1
        });

        keys = this.input.keyboard.createCursorKeys();

        this.player = this.physics.add.sprite(400, 450, 'koiboi');
        this.player.body.collideWorldBounds = true;
        this.cameras.main.startFollow(this.player, true);

        const layer = this.add.rectangle(400, 300, 800, 2000, 0x99d9ea, 0.5);

        const pads = this.physics.add.staticGroup([{key: ['pad1', 'pad2', 'pad3', 'pad4'], repeat: 8, setXY: {x: 100, y: 300, stepX: 75 }},
            {key: ['pad1', 'pad2', 'pad3', 'pad4'], repeat: 8, setXY: {x: 100, y: 300 - 60, stepX: 75 }}]);


        this.add.image(200, 250, 'land1');
        this.add.image(200, -250, 'land1');
        this.add.image(600, 250, 'land2');
        this.add.image(600, -250, 'land2');
        
     }


     function update () {
        this.player.setVelocity(0);

        if (keys.right.isDown) {
            this.player.setVelocityX(300)
            this.player.play('swim', true)
        } else if (keys.left.isDown) {
            this.player.setVelocityX(-300)
            this.player.play('swim', true)
        } else if (keys.up.isDown) {
            this.player.setVelocityY(-300)
            this.player.play('swim', true)
        } else if (keys.down.isDown) {
            this.player.setVelocityY(300)
            this.player.play('swim', true)
        } else {
            this.player.stop();
            this.player.setFrame(3)
        }

    }


</script>
</body>
</html>